<div class="col-sm-8">
  <section ng-if="text">
    <h1>{{text.title}}</h1>
    <ul class="list-unstyled">
      <li>
        <span class="glyphicon glyphicon-user"></span>
        <span>Created by <strong>{{text.owner.username}}</strong></span>
      </li>
      <li ng-if="text.video_url">
        <span class="glyphicon glyphicon-facetime-video"></span>
        <a href="{{text.video_url}}" target="_blank">Video</a></li>
      <li ng-if="isWritable">
        <span class="glyphicon glyphicon-edit"></span>
        <a href="#/texts/{{text.id}}/edit">Edit</a>
      </li>
      <li><span class="glyphicon glyphicon-info-sign"></span> {{text.text.length}} characters</li>
    </ul>
    <hr>
    <div class="zh-text" zh-text="text|processText" ng-mouseup="listener()"></div>
    <div ng-if="isWritable">
      <button class="btn btn-primary" ng-if="editMode" ng-click="save()">Save</button>
      <button class="btn btn-default" ng-click="toggleEditMode()">
        {{editMode ? 'Cancel' : 'Edit Text'}}
      </button>
    </div>
  </section>
</div>

<div class="col-sm-4 right-sidebar">

  <div ng-if="text.video_url|embeddedVideoUrl">
    <h2>Video</h2>
    <ul class="list-unstyled list-inline">
      <li>
        <a ng-click="showVideo = !showVideo">
          <span ng-if="!showVideo">Show video <span class="caret"></span></span>
          <span ng-if="showVideo">Hide video <span class="dropup"><span class="caret"></span></span></span>
        </a>
      </li>
      <li><a href="{{text.video_url}}" target="_blank">Open in new tab <span class="glyphicon glyphicon-new-window"></span></a></li>
    </ul>
    <div class="embed-responsive embed-responsive-4by3" ng-if="showVideo">
      <iframe class="embed-responsive-item" ng-src="{{text.video_url|embeddedVideoUrl}}"></iframe>
    </div>
  </div>

  <div ng-if="selection">
    <h2>{{selection}}</h2>
    <div class="radio" ng-if="selectedPhrase">
      <label class="radio-inline zh-phrase zh-phrase-{{n}}" ng-repeat="n in [0, 1, 2, 3, 4, 5]">
        <input type="radio" name="level" value="{{n}}" ng-model="selectedPhrase.level" ng-change="changePhraseLevel()">
        <span class="" ng-bind="n"></span>
      </label>
    </div>
    <ul class="list-unstyled">
      <li><a href="https://translate.google.com/#zh-CN/en/{{selection}}" target="_blank">Google Translate</a></li>
    </ul>
    <div ng-if="terms && terms.length">
      <h3>Dictionary</h3>
      <div ng-include="partialsUrl + 'term_list.html'"></div>
    </div>
  </div>

</div>
